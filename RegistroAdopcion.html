<!DOCTYPE html> 
<html lang="es">
    <head>
        <meta charset="UTF-8>">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registrar mascota</title>
        <link rel="stylesheet" href="RegistroMascota.css" media="screen">
        <script src="https://kit.fontawesome.com/2542acaf4c.js" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    </head>
<body>
    <nav class="navegacion">
        <ul class="menu">
            <li> <b><a href="index2.html"> PETFRIENDLY</a> </b></li>
            <li> <a href="Recomendaciones.html"> Recomendaciones</a></li>
            <li>
                <a href="#"> Registrar mascota</a>
                <ul class="submenu">
                    <li> <a href="RegistroMascota.html"> Mascota perdida</a></li>
                    <li> <a href="#"> Mascota en adopción</a></li>
                </ul>
            </li>
            <li> <a href="VerAnimales.html"> Ver animales</a></li> 
            <button type="button" title="salir" class="boton1" id="salir" name="salir"> <i class="fa-solid fa-right-from-bracket"></i>Cerrar sesión</button>
        </ul>
    </nav>
    
    
    <div class="formulario">
        <div class="titulo">
            <font face="cambria"><center><h2 style="color:#9d8189">Registrar mascota en adopción</h2></center></font>
        </div>

        <div class="contenedor">
            <form id="animalesPerdidos">
           <br> <font face="cambria" font size=4><label class="u-label">Ingresa tu nombre</label></font><font></font></br> 
                  <input type="text" class="nombre" id="nombre" name="nombre">

                  <br> <font face="cambria" font size=4><label class="u-label">Número de contacto</label></font><font></font></br> 
                  <input type="text" class="numero" id="numero" name="numero">  

                  <br><font face="cambria" font size=4><label for="lang" class="estado">Estado mascota</label></br></font></font>
                  <select name="estado" id="lang" class="select">
                    <option value="enfermo">Enfermo</option>
                    <option value="bueno">Buen estado</option>
                    
                  </select>

           <br> <font face="cambria" font size=4><label class="u-label">Descripción</label></font></font> </br>
                  <input type="textarea" rows="10" cols="40" id="descripcion" name="descripcion" class="descripcion" placeholder="Descripcion pequeña de caracteristicas físicas de la mascota" required>

           <br> <font face="cambria" font size=4><label class="u-label">Dirección</label></font></font> </br>
                  <input type="text" id="direccion" name="direccion" class="direccion" placeholder="Calle 43# 56-65" required>
        
            <br> <font face="cambria" font size=4><label class="u-label">Imagen</label></font></font> </br>
                <input placeholder="Enter your message" rows="4" cols="50" id="imagen" name="imagen" class="imagen" required="required" type="file" accept="IMAGES">
 
                <br><button type="button" title="Ingresar" class="boton" id="guardar" name="enviar">Enviar</button></br>
            </form>
        </div>
    </div>

    <script type="module">
        console.log("todo ok")
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
        import { getDatabase, set,ref, update, push, child  } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-auth.js";

        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyDnpnXJsxMxn33RV2rPjGMDD1gnwDQD4z0",
          authDomain: "petfriendly-5a8d3.firebaseapp.com",
          projectId: "petfriendly-5a8d3",
          storageBucket: "petfriendly-5a8d3.appspot.com",
          messagingSenderId: "990910792060",
          appId: "1:990910792060:web:c71269018d234c4fd5a4f9"
        };


        // Initialize Firebase
	const app = initializeApp(firebaseConfig);
	const database = getDatabase(app);
    const auth = getAuth();

    salir.addEventListener('click', (e) =>{ 

        auth.signOut().then(() => {

        location.href ="http://127.0.0.1:5500/index.html";
        console.log('sign Out');
        console.log("------------USUARIO CERRADO");
        })
    })

        var nombre= document.getElementById('nombre');
        var numero=document.getElementById('numero');
        var lang = document.getElementById('lang');
        var descripcion = document.getElementById('descripcion');
        var direccion = document.getElementById('direccion');
        var imagen = document.getElementById('imagen');


    function InsertData()
    {
        
        set(ref(database, 'mascotaAdopcion/' + numero.value), {
        nombre:nombre.value,
        lang:lang.value,
        descripcion:descripcion.value,
        direccion:direccion.value,
        imagen:imagen.value
  }) .then(() => {
  // Data saved successfully!
  swal({
   title: 'Correcto',
   text:'Mascota ingresada correctamente, Solo nos queda agradecerte. Realizaremos las respectivas validaciones y tu mascota estará lista ',
   icon: 'success'

 });

})
.catch((error) => {
  // The write failed...
  alert(error);
});
    }
   
    


 guardar.addEventListener('click', InsertData);
 guardar.addEventListener('click',function(){
 animalesPerdidos.reset()
 ;})

    
    </script>


</body>
</html>